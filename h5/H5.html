<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=640,user-scalable=no" />
<link type="text/css" href="css/h5.css" rel="stylesheet"/>
<title>无标题文档</title>
</head>

<body>
	<section class="page pageShow" id="welcome">
		<div class="tree">
			<img src="img/tree.jpg" />
			<div class="welcome2">
				<img src="img/title.png" />
				<span class="shake">
					<img src="img/shake.png" />
				</span>
			</div>
			<img src="img/title2.png" class="tree2" />
			<span class="cloud"></span>
			<span class="cloud"></span>
			<span class="cloud"></span>
		</div>
		<h1 id="logo">
			<img src="img/logo.png" />
		</h1>
	</section>
	<section class="page" id="succ">
		<div class="tree">
			<img src="img/tree.jpg" />
			<div class="welcome2">
				<img src="img/tranks2.png" />
			</div>
			<span class="cloud"></span>
			<span class="cloud"></span>
			<span class="cloud"></span>
		</div>
		<input type="button" value="重新评价" class="btn submit" />
	</section>
	<section class="page" id="form">
		<section class="scroll">
		<section class="tags" id="formTags">
				<h2>添加标签</h2>
				<label>
					<input type="radio" name="tags" value="点赞" />
					<span>点赞</span>
				</label>
				<label>
					<input type="radio" name="tags" value="吐槽" />
					<span>吐槽</span>
				</label>
				<label>
					<input type="radio" name="tags" value="投诉" />
					<span>投诉</span>
				</label>
				<label>
					<input type="radio" name="tags" value="表扬" />
					<span>表扬</span>
				</label>
				<label>
					<input type="radio" name="tags" value="弱爆了" />
					<span>弱爆了</span>
				</label>
				<label>
					<input type="radio" name="tags" value="给力" />
					<span>给力</span>
				</label>
				<label>
					<input type="radio" name="tags" value="分享" />
					<span>分享</span>
				</label>
				<label>
					<input type="radio" name="tags" value="感动" />
					<span>感动</span>
				</label>
				<label>
					<input type="radio" name="tags" value="气愤" />
					<span>气愤</span>
				</label>
				<label>
					<input type="radio" name="tags" value="开心" />
					<span>开心</span>
				</label>
				<label>
					<input type="radio" name="tags" value="抓拍" />
					<span>抓拍</span>
				</label>
				<label>
					<input type="radio" name="tags" value="惊喜" />
					<span>惊喜</span>
				</label>
			</section>
			<textarea class="formText" placeholder="（选填：说点什么吧~）" rows="5"></textarea>
			<input type="tel" class="formText" placeholder="（选填：您的联系方式~）"/>
			<input type="button" value="上传" class="btn"/>
	</section>
	</section>
	<section class="page " id="news">
		<img src="img/news.png"/>
		<h2>请上传旅游投诉以及突发事件线索</h2>
		<section class="file">
			<label>
				<input type="file" />
				<span>导入视频</span>
 			</label>
			<label>
				<input type="file" />
				<span>上传照片</span>
 			</label>
			<p class="info"></p>
		</section>
	</section>
	<section class="page" id="mask"></section>
	
	<section class="page pageShow" id="index">
		<section class="scroll">
		<section id="picTab">
			<ul id="picList">
				<li><img src="img/1.jpg" /></li>
				<li><img src="img/2.jpg"/></li>
				<li><img src="img/3.jpg"/></li>
				<li><img src="img/4.jpg"/></li>
				<li><img src="img/5.jpg"/></li>
			</ul>
			<section id="picMask">
				<p>成都九寨沟景区</p>
				<ul id="picNav">
					<li class="active"></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
			</section>
		</section>
		<a href="javascript:;" class="newsBtn">
			<em>新闻线索</em>
			<span></span>
			<span></span>
			<span></span>		</a>
		 <section id="score">
				<h2>给景点评分</h2>
				<ul>
					<li>
						<span>综合印象</span>
						<input type="hidden" value="">
						<nav>
						<a href="javascript:;"></a>
						<a href="javascript:;"></a>
						<a href="javascript:;"></a>
						<a href="javascript:;"></a>
						<a href="javascript:;"></a>						</nav>
					</li>
					<li>
						<span>服务指数</span>
						<input type="hidden" value="">
						<nav>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>						</nav>
					</li>
					<li>
						<span>消费指数</span>
						<input type="hidden" value="">
						<nav>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>
							<a href="javascript:;"></a>						</nav>
					</li>
				</ul>
			</section>
			<section class="tags">
				<h2>给景区添加标签</h2>
				<label>
					<input type="radio" name="tags2" value="服务好" />
					<span>服务好</span>				</label>
				<label>
					<input type="radio" name="tags2" value="景色赞" />
					<span>景色赞</span>				</label>
				<label>
					<input type="radio" name="tags2" value="千篇一律" />
					<span>千篇一律</span>				</label>
				<label>
					<input type="radio" name="tags2" value="看人海" />
					<span>看人海</span>				</label>
				<label>
					<input type="radio" name="tags2" value="挤爆了" />
					<span>挤爆了</span>				</label>
				<label>
					<input type="radio" name="tags2" value="如厕难" />
					<span>如厕难</span>				</label>
				<label>
					<input type="radio" name="tags2" value="贼贵" />
					<span>贼贵</span>				</label>
				<label>
					<input type="radio" name="tags2" value="累挂了" />
					<span>累挂了</span>				</label>
				<label>
					<input type="radio" name="tags2" value="再来一次" />
					<span>再来一次</span>				</label>
				<label>
					<input type="radio" name="tags2" value="再也不来" />
					<span>再也不来</span>				</label>
			</section>
			<p class="info"></p>
			<input type="button" value="提交" class="btn submit" />
	</section>
	</section>
	
<script>
var cHeight = document.documentElement.clientHeight;
var cWidth = document.documentElement.clientWidth;

document.body.style.height = cHeight + "px";

var oWelcome = document.getElementById("welcome");
oWelcome.style.opacity = 0;

oWelcome.addEventListener("transitionend",function(){
	this.className = "page";
	autoTab();
})
oWelcome.addEventListener("webkitTransitionEnd",function(){
	this.className = "page";
	autoTab();
})

var oPicList = document.getElementById("picList");
var oPicNav = document.getElementById("picNav");
var aPicNavLi = oPicNav.getElementsByTagName("li");

var oTabTimer = null;
var oTabNum = 0;
var oTabLength = 0
function autoTab(){
	oTabTimer = setInterval(function(){
		oTabNum++;
		oTabNum = oTabNum % aPicNavLi.length;
		fnTab();
	},2000)
}

function fnTab(){
	oTabLength = -cWidth * oTabNum
	oPicList.style.WebkitTransition = oPicList.style.transition = ".5s";
	oPicList.style.WebkitTransform = oPicList.style.transform = "translateX("+ oTabLength +"px)" ;
	for(var i=0; i<aPicNavLi.length;i++){
		aPicNavLi[i].className = "";
		aPicNavLi[oTabNum].className = "active";
	}
}

var iTouchX = 0;
var iDis = 0;

function fnStart(ev){
	document.ontouchstart=function(){
		return false;
	}
	ev = ev.changedTouches[0];
	oPicList.style.WebkitTransition = oPicList.style.transition = "";
	iTouchX = ev.pageX;
	iX = oTabLength;
	clearInterval(oTabTimer);
}
function fnMove(ev){
	ev = ev.changedTouches[0];
	iDis = ev.pageX - iTouchX;
	oTabLength = iX + iDis;
	oPicList.style.WebkitTransform = oPicList.style.transform = "translateX("+ oTabLength +"px)" ;
}

function fnEnd(ev){
	oTabNum = -Math.round(oTabLength/cWidth)
	if(oTabNum<=0){
		oTabNum=0
	};
	if(oTabNum>=aPicNavLi.length-1){oTabNum = aPicNavLi.length-1};
	fnTab();
	autoTab();
}

oPicList.addEventListener("touchstart",fnStart)
oPicList.addEventListener("touchmove",fnMove)
oPicList.addEventListener("touchend",fnEnd)

function fnScore(){
	var oScore = document.getElementById("score");
	var aScoreLi = oScore.getElementsByTagName("li");
	for(var i=0;i<aScoreLi.length;i++){
		fnNav(aScoreLi[i]);
	}
	function fnNav(oLi){
		var aNav = oLi.getElementsByTagName("a");
		var oInput = oLi.getElementsByTagName("input")[0];
		for(var i=0;i<aNav.length;i++){
			aNav[i].index = i;
			aNav[i].addEventListener("touchstart",function(){
				for(var i=0;i<aNav.length;i++){
					if(i<=this.index){
						aNav[i].className = "active"
					} else {
						aNav[i].className = ""
					}
					oInput.value = this.index+1;
				}
			})
		}
	}
	fnIndex();
}
fnScore();

function fnIndex(){
	var oIndex = document.getElementById("index");
	var oBtn = oIndex.getElementsByClassName("btn")[0];
	
	oBtn.addEventListener("touchend",fnEnd);
	function fnEnd(){
		var oScore = document.getElementById("score");
		var aInput = oScore.getElementsByTagName("input");
		var oIndexBoo = (function(){
			for(var i=0;i<aInput.length;i++){
				if(aInput[i].value == ""){
					return false 
				} 
			}
			return true
		})();
		if(oIndexBoo){
			var oTags = document.getElementsByClassName("tags")[1];
			var aTagsInput = oTags.getElementsByTagName("input");
			var oTagsBoo = (function(){
				for(var i=0;i<aTagsInput.length;i++){
					if(!aTagsInput[i].checked == ""){
						return true
					} 
				}
				return false;
			})();
			if(oTagsBoo){
				fnMask();
			} else {
				fnInfo("给景区添加标签")
			}
		} else {
			fnInfo("给景区评分")
		}
	} 
	function fnInfo(text){
		var oInfo = oIndex.getElementsByClassName("info")[0];
		oInfo.innerHTML = text;
		oInfo.style.transform = "scale(1)";
		oInfo.style.opacity = 1;
		setTimeout(function(){
			oInfo.style.transform = "scale(0)";
			oInfo.style.opacity = 0;
		},1000)
	}
	
};

function fnMask(){
	var oMask = document.getElementById("mask");
	var oIndex = document.getElementById("index");
	var oNews = document.getElementById("news");
	oMask.className = "page pageShow"
	setTimeout(function(){
		oMask.style.opacity = 1;
		oIndex.style.filter = oIndex.style.WebkitFilter = "blur(2px)"
	},20)
	setTimeout(function(){
		oMask.style.opacity = 0;
		oIndex.style.filter = oIndex.style.WebkitFilter = "blur(0)";
		oMask.className = "page";
		oNews.className = "page pageShow";
		setTimeout(function(){
			oNews.style.opacity = 1;
		},20)
	},3000)
}

function fnNews(){
	var oNews = document.getElementById("news");
	var aInput = oNews.getElementsByTagName("input");
	var oInfo = oNews.getElementsByClassName("info")[0];
	
	function fnInfo(text){
		oInfo.innerHTML = text;
		oInfo.style.transform = "scale(1)";
		oInfo.style.opacity = 1;
		setTimeout(function(){
			oInfo.style.transform = "scale(0)";
			oInfo.style.opacity = 0;
		},1000)
	}
	
	aInput[0].onchange = function(){
		if(this.files[0].type.split("/")[0] == "video"){
			fnNewsSkip();
			this.value = "";
		} else {
			fnInfo("请上传视频")
		}
	};
	aInput[1].onchange = function(){
		if(this.files[0].type.split("/")[0] == "image"){
			fnNewsSkip();
			this.value = "";
		} else {
			fnInfo("请上传图片");
		}
	};
}
function fnNewsSkip(){
	var oNews = document.getElementById("news");
	var oForm = document.getElementById("form");
	oNews.style.opacity = 0;
	oNews.className = "page";
	oForm.className = "page pageShow";
}
fnNews();

function fnFormIn(){
	var oForm = document.getElementById("form");
	var oSucc = document.getElementById("succ");
	var aLabel = oForm.getElementsByTagName("label");
	var oBtn = oForm.getElementsByClassName("btn")[0];
	var oFormOff = false;
	for(var i=0;i<aLabel.length;i++){
		aLabel[i].addEventListener("touchend",function(){
			oFormOff = true
			oBtn.className = "btn submit";
		})
	};
	oBtn.addEventListener("touchend",function(){
		if(oFormOff){
			oFormOff = !oFormOff;
			oForm.className = "page";
			oSucc.className = "page pageShow";
			for(var i=0;i<aLabel.length;i++){
				aLabel[i].getElementsByTagName("input")[0].checked = false;
			}
			oBtn.className = "btn";
		}
	});
}
fnFormIn();

function fnSucc(){
	var oSucc = document.getElementById("succ");
	var oBtn = oSucc.getElementsByClassName("btn")[0];
	var oIndex = document.getElementById("index");
	oBtn.addEventListener("touchend",function(){
		oSucc.className = "page";
		oIndex.className = "page pageShow";
	})
}
fnSucc();

function fnNewsBtn(){
	var oIndex = document.getElementById("index");
	var oNewsBtn = oIndex.getElementsByClassName("newsBtn")[0];
	var oNews = document.getElementById("news");
	oNewsBtn.addEventListener("touchend",function(){
		oNews.className = "page pageShow";
		setTimeout(function(){
			oNews.style.opacity = 1;
		},20)
		oIndex.className = "page";
	})
};
fnNewsBtn();
</script>	
</body>
</html>
